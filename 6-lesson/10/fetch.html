<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>Магазин — список товаров</title>
    <style>
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        max-width: 600px;
        margin: 40px auto;
      }

      h1 {
        margin-bottom: 16px;
      }

      #view {
        border: 1px solid #e5e7eb;
        padding: 16px;
        border-radius: 8px;
        min-height: 120px;
      }

      ul {
        padding-left: 18px;
      }

      li {
        margin-bottom: 4px;
      }

      nav a {
        margin-right: 12px;
        cursor: pointer;
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <h1>Магазин</h1>

    <nav>
      <a id="link-products">Товары</a>
      <a id="link-cart">Корзина</a>
    </nav>

    <div id="view">
      Загрузка...
    </div>

    <script>
      async function showProducts() {
        const view = document.getElementById("view");
        view.textContent = "Загрузка товаров...";

        const response = await fetch("/api/products");
        const products = await response.json();

        const list = document.createElement("ul");

        products.forEach((product) => {
          const li = document.createElement("li");
          li.textContent = product.name + " — " + product.price + " ₽";
          list.appendChild(li);
        });

        view.innerHTML = "";
        view.appendChild(list);
      }

      async function showCart() {
        const view = document.getElementById("view");
        view.textContent = "Загрузка корзины...";


        const response = await fetch("/api/cart");
        const cart = await response.json();

        const list = document.createElement("ul");

        if (cart.items.length === 0) {
          view.textContent = "В корзине пока пусто.";
          return;
        }

        cart.items.forEach((item) => {
          const li = document.createElement("li");
          li.textContent =
            item.name + " — " + item.price + " ₽ × " + item.quantity;
          list.appendChild(li);
        });

        view.innerHTML = "";
        view.appendChild(list);
      }

      document
        .getElementById("link-products")
        .addEventListener("click", (event) => {
          event.preventDefault();
          showProducts();
        });

      document.getElementById("link-cart").addEventListener("click", (event) => {
        event.preventDefault();
        showCart();
      });

      showProducts();
    </script>
  </body>
</html>

<!--

GET /api/products
[
  { "name": "Ноутбук",   "price": 50000 },
  { "name": "Мышка",     "price": 1500  },
  { "name": "Клавиатура","price": 3000  }
]

GET /api/cart
{
  "items": [
    { "name": "Ноутбук", "price": 50000, "quantity": 1 }
  ]
}
-->
